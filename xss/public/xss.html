<!DOCTYPE html>
<html lang="ja">
	<head>
		<title>XSS検証ページ</title>
	</head>
	<body>
		<h1>XSS検証ページ</h1>
		<div id="result"></div>
		<a href="#" id="link">リンクをクリック</a>
		<script>
			const url = new URL(location.href);
			const message = url.searchParams.get("message");
			if (message !== null) {
				const textNode = document.createTextNode(message);
				document.querySelector("#result").appendChild(textNode);
			}

			const urlStr = url.searchParams.get("url");
			if (urlStr !== null) {
				const linkUrl = new URL(urlStr, url.origin);
				if (linkUrl.protocol === "http" || linkUrl.protocol === "https") {
					document.querySelector("#link").href = linkUrl;
				} else {
					console.log("httpまたはhttps以外のURLが指定されています");
				}
			}
		</script>
	</body>
</html>
